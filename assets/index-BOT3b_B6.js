var O=Object.defineProperty;var H=(e,t,o)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var i=(e,t,o)=>(H(e,typeof t!="symbol"?t+"":t,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const p=document.querySelector(".game-container"),d=document.querySelector(".canvas"),c=d.getContext("2d");d.height=p.getBoundingClientRect().height;d.width=p.getBoundingClientRect().width;const r=d.height,a=d.width,I=50,P=50,w=50,S=10,T=12,M=r/8;class x{constructor(t){i(this,"x");i(this,"y");i(this,"h");i(this,"w");i(this,"img");i(this,"dx");i(this,"dy");i(this,"gravity");i(this,"loaded");i(this,"jumpHeight");i(this,"moveingRight");i(this,"moveingLeft");this.x=a/2,this.y=r/2,this.h=P,this.w=I,this.dx=8,this.dy=0,this.gravity=.1,this.jumpHeight=-4,this.moveingRight=!1,this.moveingLeft=!1,this.img=new Image,this.img.src=t,this.loaded=!1,this.img.onload=()=>{this.loaded=!0,this.draw()}}draw(){this.loaded&&c.drawImage(this.img,this.x,this.y,this.w,this.h)}updateImage(t){this.img.src=t,this.draw()}fall(){this.dy+=this.gravity,this.y+=this.dy}jump(){this.dy=this.jumpHeight}onPlatform(t){if(this.y+this.h>=t.y&&this.y+this.h<=t.y+t.h){let o=t.x-this.w,l=t.x+t.w;this.x>=o&&this.x<=l&&this.jump()}}update(){this.moveingLeft?(this.updateImage("./doodler-left.png"),this.x-=this.dx):this.moveingRight&&(this.updateImage("./doodler-right.png"),this.x+=this.dx),this.x+this.w<0&&(this.x=a),this.x>a&&(this.x=0),this.y<r/2&&(this.y=r/2),this.fall()}}function L(e){return Math.floor(Math.random()*e)}class q{constructor(t,o){i(this,"x");i(this,"y");i(this,"h");i(this,"w");i(this,"img");this.x=t,this.y=o,this.w=w,this.h=S,this.img=new Image,this.img.src="./platform.png"}draw(){c.drawImage(this.img,this.x,this.y,this.w,this.h)}update(){this.y>r&&(this.y=0,this.x=L(a-this.w))}}function v(){const e=[];for(let t=0;t<T;++t)e.push(new q(L(a-w),r-(t+1)*M));return e}function D(e,t){e.key==="ArrowRight"?t.moveingRight=!0:e.key==="ArrowLeft"&&(t.moveingLeft=!0)}function E(e,t){e.key==="ArrowRight"?t.moveingRight=!1:e.key==="ArrowLeft"&&(t.moveingLeft=!1)}const _=document.querySelector(".btn--start"),F=document.querySelector(".btn--restart"),b=document.querySelector(".main-menu"),y=document.querySelector(".restart-menu"),C=document.querySelector(".score");let h=new x("./doodler-right.png"),A=v(),f=0,u=!1;function G(){c.fillStyle="black",c.font="32px Arial",c.fillText("Score: "+f,20,50)}function j(){h=new x("./doodler-right.png"),A=v(),f=0,u=!1}function g(){if(u)return;c.clearRect(0,0,a,r);let e=h.dy*-1;A.forEach(t=>{const o=t.y+e;o>t.y&&(t.y=o),t.y>r&&f++,t.update(),t.draw(),h.onPlatform(t)}),h.draw(),h.update(),G(),h.y>r&&(u=!0),requestAnimationFrame(g)}function R(){_.onclick=()=>{b.style.display="none",g()},F.onclick=()=>{y.style.display="none",j(),g()},u&&(y.style.display="flex",C.innerHTML=`Score ${f} points`),requestAnimationFrame(R)}R();document.addEventListener("keydown",e=>D(e,h));document.addEventListener("keyup",e=>E(e,h));
